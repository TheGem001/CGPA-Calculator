<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyIUB CGPA Calculator</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel to translate React code in the browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-font-smoothing: antialiased;
        }
        /* Hide scrollbar for cleaner look in some areas */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONS (Inline to avoid import errors) ---
        const GraduationCap = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg>
        );
        const Calculator = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect x="4" y="2" width="16" height="20" rx="2"/><line x1="8" y1="6" x2="16" y2="6"/><line x1="16" y1="14" x2="16" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></svg>
        );
        const Trash2 = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></svg>
        );
        const Plus = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        );
        const RotateCcw = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="1 4 1 10 7 10"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></svg>
        );
        const BookOpen = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
        );
        const ChevronDown = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="6 9 12 15 18 9"/></svg>
        );
        const ChevronUp = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="18 15 12 9 6 15"/></svg>
        );

        // --- LOGIC ---

        const getGradePoint = (marks) => {
            const m = parseInt(marks);
            if (isNaN(m)) return 0;
            
            if (m >= 85) return 4.0;
            if (m === 84) return 3.9;
            if (m === 83) return 3.9;
            if (m === 82) return 3.8;
            if (m === 81) return 3.7;
            if (m === 80) return 3.7;
            if (m === 79) return 3.6;
            if (m === 78) return 3.5;
            if (m === 77) return 3.4;
            if (m === 76) return 3.3;
            if (m === 75) return 3.3;
            if (m === 74) return 3.3;
            if (m === 73) return 3.2;
            if (m === 72) return 3.1;
            if (m === 71) return 3.1;
            if (m === 70) return 3.0;
            if (m === 69) return 2.9;
            if (m === 68) return 2.8;
            if (m === 67) return 2.7;
            if (m === 66) return 2.6;
            if (m === 65) return 2.5;
            if (m === 64) return 2.4;
            if (m === 63) return 2.3;
            if (m === 62) return 2.2;
            if (m === 61) return 2.1;
            if (m === 60) return 2.0; 
            return 0.0;
        };

        const getLetterGrade = (marks) => {
            const m = parseInt(marks);
            if (isNaN(m)) return '-';
            if (m >= 85) return 'A+';
            if (m >= 80) return 'A-'; 
            if (m >= 75) return 'B+';
            if (m >= 70) return 'B';
            if (m >= 65) return 'C+';
            if (m >= 60) return 'C';
            return 'F';
        };

        const DEFAULT_SEMESTER_1 = [
            { id: 1, name: 'Programming Fundamentals (Python)', creditHours: 4, marks: '' },
            { id: 2, name: 'Calculus and Analytical Geometry', creditHours: 3, marks: '' },
            { id: 3, name: 'English Composition', creditHours: 3, marks: '' },
            { id: 4, name: 'Applied Physics', creditHours: 3, marks: '' },
            { id: 5, name: 'Islamic Studies', creditHours: 3, marks: '' },
            { id: 6, name: 'Introduction to ICT / Skills', creditHours: 3, marks: '' },
        ];

        // --- MAIN COMPONENT ---
        function App() {
            const [subjects, setSubjects] = useState(DEFAULT_SEMESTER_1);
            const [gpa, setGpa] = useState(0);
            const [totalCreditHours, setTotalCreditHours] = useState(0);
            const [showTable, setShowTable] = useState(false);

            useEffect(() => {
                calculateGPA();
            }, [subjects]);

            const calculateGPA = () => {
                let totalPoints = 0;
                let totalCredits = 0;

                subjects.forEach(sub => {
                    const marks = parseInt(sub.marks) || 0;
                    const credits = parseInt(sub.creditHours) || 0;
                    
                    if (sub.marks !== '' && sub.marks !== null) { 
                        const gp = getGradePoint(marks);
                        totalPoints += (gp * credits);
                        totalCredits += credits;
                    }
                });

                setTotalCreditHours(totalCredits);
                setGpa(totalCredits > 0 ? (totalPoints / totalCredits).toFixed(2) : "0.00");
            };

            const handleUpdateSubject = (id, field, value) => {
                const updatedSubjects = subjects.map(sub => 
                    sub.id === id ? { ...sub, [field]: value } : sub
                );
                setSubjects(updatedSubjects);
            };

            const addSubject = () => {
                const newId = subjects.length > 0 ? Math.max(...subjects.map(s => s.id)) + 1 : 1;
                setSubjects([...subjects, { id: newId, name: `Subject ${newId}`, creditHours: 3, marks: '' }]);
            };

            const removeSubject = (id) => {
                setSubjects(subjects.filter(sub => sub.id !== id));
            };

            const resetData = () => {
                if(window.confirm("Reset all marks?")) {
                    setSubjects(subjects.map(s => ({...s, marks: ''})));
                }
            };

            const clearAll = () => {
                if(window.confirm("Clear all subjects and start fresh?")) {
                    setSubjects([]);
                }
            }

            return (
                <div className="pb-10">
                    {/* Header */}
                    <div className="bg-[#1e2648] text-white p-6 shadow-lg">
                        <div className="max-w-2xl mx-auto flex items-center gap-3">
                            <div className="bg-yellow-500 p-2 rounded-lg text-[#1e2648]">
                                <GraduationCap size={28} />
                            </div>
                            <div>
                                <h1 className="text-xl font-bold">MyIUB GPA Calculator</h1>
                                <p className="text-slate-300 text-xs">Software Engineering â€¢ Semester 1</p>
                            </div>
                        </div>
                    </div>

                    <div className="max-w-2xl mx-auto px-4 -mt-6">
                        {/* Score Card */}
                        <div className="bg-white rounded-xl shadow-lg p-6 mb-6 border-t-4 border-yellow-500">
                            <div className="flex justify-between items-center text-center">
                                <div>
                                    <p className="text-slate-500 text-xs uppercase font-bold tracking-wider">Credits</p>
                                    <p className="text-2xl font-bold text-slate-700">{totalCreditHours}</p>
                                </div>
                                <div className="bg-slate-100 px-6 py-4 rounded-xl">
                                    <p className="text-slate-500 text-xs uppercase font-bold tracking-wider mb-1">GPA</p>
                                    <p className={`text-5xl font-extrabold ${parseFloat(gpa) >= 3.0 ? 'text-green-600' : parseFloat(gpa) >= 2.0 ? 'text-yellow-600' : 'text-red-500'}`}>
                                        {gpa}
                                    </p>
                                </div>
                            </div>
                        </div>

                        {/* Instructions */}
                        <div className="bg-blue-50 text-blue-800 p-4 rounded-lg mb-6 text-sm flex gap-3 items-start border border-blue-100">
                            <div className="flex-shrink-0 mt-0.5"><Calculator size={20} /></div>
                            <p>
                                Enter your <strong>obtained</strong> or <strong>expected</strong> marks (0-100). 
                                The system uses the official IUB Ready Recknor table (e.g., 85+ is 4.0).
                            </p>
                        </div>

                        {/* Subject List */}
                        <div className="space-y-4">
                            {subjects.map((subject) => (
                                <div key={subject.id} className="bg-white p-4 rounded-lg shadow-sm border border-slate-200 transition-all hover:shadow-md">
                                    <div className="flex flex-col sm:flex-row gap-4">
                                        
                                        {/* Subject Name Input */}
                                        <div className="flex-grow">
                                            <label className="text-xs text-slate-400 font-semibold uppercase mb-1 block">Subject Name</label>
                                            <input 
                                                type="text" 
                                                value={subject.name}
                                                onChange={(e) => handleUpdateSubject(subject.id, 'name', e.target.value)}
                                                className="w-full font-medium text-slate-700 bg-transparent border-b border-slate-200 focus:border-[#1e2648] focus:outline-none pb-1 transition-colors"
                                                placeholder="Subject Name"
                                            />
                                        </div>

                                        <div className="flex gap-3">
                                            {/* Credit Hours */}
                                            <div className="w-24">
                                                <label className="text-xs text-slate-400 font-semibold uppercase mb-1 block">Credits</label>
                                                <select
                                                    value={subject.creditHours}
                                                    onChange={(e) => handleUpdateSubject(subject.id, 'creditHours', parseInt(e.target.value))}
                                                    className="w-full bg-slate-50 border border-slate-200 rounded p-2 text-sm font-semibold text-slate-700 focus:outline-none focus:border-yellow-400"
                                                >
                                                    <option value="1">1 CH</option>
                                                    <option value="2">2 CH</option>
                                                    <option value="3">3 CH</option>
                                                    <option value="4">4 CH</option>
                                                </select>
                                            </div>

                                            {/* Marks Input */}
                                            <div className="w-24">
                                                <label className="text-xs text-slate-400 font-semibold uppercase mb-1 block">Marks</label>
                                                <input
                                                    type="number"
                                                    inputMode="numeric"
                                                    min="0"
                                                    max="100"
                                                    placeholder="-"
                                                    value={subject.marks}
                                                    onChange={(e) => {
                                                        let val = e.target.value;
                                                        if (val > 100) val = 100;
                                                        if (val < 0) val = 0;
                                                        handleUpdateSubject(subject.id, 'marks', val);
                                                    }}
                                                    className="w-full bg-white border-2 border-slate-200 focus:border-yellow-400 rounded p-2 text-center font-bold text-[#1e2648] outline-none transition-colors"
                                                />
                                            </div>
                                        </div>
                                    </div>

                                    {/* Row Stats */}
                                    <div className="mt-3 pt-3 border-t border-slate-100 flex justify-between items-center">
                                        <div className="text-xs text-slate-400">
                                            GP: <span className="font-mono font-bold text-slate-600">{subject.marks !== '' ? getGradePoint(subject.marks).toFixed(1) : '-'}</span> 
                                            <span className="mx-2">|</span>
                                            Grade: <span className={`font-mono font-bold ${getLetterGrade(subject.marks) === 'F' ? 'text-red-500' : 'text-green-600'}`}>{getLetterGrade(subject.marks)}</span>
                                        </div>
                                        <button 
                                            onClick={() => removeSubject(subject.id)}
                                            className="text-slate-300 hover:text-red-500 transition-colors"
                                            title="Remove Subject"
                                        >
                                            <Trash2 size={18} />
                                        </button>
                                    </div>
                                </div>
                            ))}
                        </div>

                        {/* Action Buttons */}
                        <div className="mt-6 flex flex-wrap gap-3">
                            <button 
                                onClick={addSubject}
                                className="flex-1 bg-[#1e2648] text-white py-3 px-4 rounded-lg font-semibold flex items-center justify-center gap-2 hover:bg-[#2a3560] transition-colors shadow-md active:transform active:scale-95"
                            >
                                <Plus size={18} /> Add Subject
                            </button>
                            
                            <button 
                                onClick={resetData}
                                className="bg-white text-slate-600 border border-slate-200 py-3 px-4 rounded-lg font-semibold flex items-center justify-center gap-2 hover:bg-slate-50 transition-colors active:transform active:scale-95"
                            >
                                <RotateCcw size={18} /> Reset Marks
                            </button>
                        </div>

                        <div className='mt-4 text-center'>
                            <button onClick={clearAll} className='text-xs text-red-400 underline hover:text-red-600'>Clear all subjects</button>
                        </div>

                        {/* Grading Table Reference */}
                        <div className="mt-10 border border-slate-200 rounded-xl overflow-hidden bg-white mb-10">
                            <button 
                                onClick={() => setShowTable(!showTable)}
                                className="w-full flex justify-between items-center p-4 bg-slate-50 hover:bg-slate-100 transition-colors"
                            >
                                <div className="flex items-center gap-2 font-semibold text-slate-700">
                                    <BookOpen size={18} /> IUB Ready Recknor Reference
                                </div>
                                {showTable ? <ChevronUp size={18} /> : <ChevronDown size={18} />}
                            </button>
                            
                            {showTable && (
                                <div className="p-4 bg-white overflow-x-auto">
                                    <table className="w-full text-sm text-left">
                                        <thead className="text-xs text-slate-500 uppercase bg-slate-50">
                                            <tr>
                                                <th className="px-3 py-2">Marks</th>
                                                <th className="px-3 py-2">GP</th>
                                                <th className="px-3 py-2">Marks</th>
                                                <th className="px-3 py-2">GP</th>
                                            </tr>
                                        </thead>
                                        <tbody className="divide-y divide-slate-100">
                                            <tr><td className="px-3 py-1 font-medium">85-100</td><td className="px-3 
